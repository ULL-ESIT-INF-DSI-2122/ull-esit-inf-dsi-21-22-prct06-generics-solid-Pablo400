"use strict";/* eslint-disable valid-jsdoc */ /* eslint-disable max-len */ /* eslint-disable require-jsdoc */function cov_1ukkxo9spu(){var path="/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts";var hash="bebd06c12a572ea9372a86faea29f796b151b2ff";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts",statementMap:{"0":{start:{line:5,column:0},end:{line:5,column:62}},"1":{start:{line:6,column:0},end:{line:6,column:25}},"2":{start:{line:18,column:8},end:{line:18,column:33}},"3":{start:{line:19,column:8},end:{line:19,column:31}},"4":{start:{line:20,column:8},end:{line:20,column:23}},"5":{start:{line:23,column:8},end:{line:23,column:29}},"6":{start:{line:26,column:8},end:{line:26,column:28}},"7":{start:{line:29,column:8},end:{line:29,column:24}},"8":{start:{line:38,column:16},end:{line:38,column:17}},"9":{start:{line:39,column:8},end:{line:42,column:9}},"10":{start:{line:40,column:12},end:{line:40,column:33}},"11":{start:{line:41,column:12},end:{line:41,column:16}},"12":{start:{line:43,column:8},end:{line:43,column:19}},"13":{start:{line:52,column:29},end:{line:52,column:30}},"14":{start:{line:53,column:8},end:{line:58,column:9}},"15":{start:{line:53,column:21},end:{line:53,column:22}},"16":{start:{line:54,column:12},end:{line:57,column:13}},"17":{start:{line:55,column:16},end:{line:55,column:35}},"18":{start:{line:56,column:16},end:{line:56,column:22}},"19":{start:{line:59,column:8},end:{line:59,column:30}},"20":{start:{line:67,column:21},end:{line:67,column:34}},"21":{start:{line:68,column:25},end:{line:68,column:42}},"22":{start:{line:69,column:29},end:{line:69,column:30}},"23":{start:{line:70,column:37},end:{line:70,column:39}},"24":{start:{line:71,column:16},end:{line:71,column:17}},"25":{start:{line:72,column:16},end:{line:72,column:17}},"26":{start:{line:73,column:36},end:{line:73,column:37}},"27":{start:{line:74,column:32},end:{line:74,column:33}},"28":{start:{line:75,column:25},end:{line:75,column:27}},"29":{start:{line:76,column:8},end:{line:76,column:38}},"30":{start:{line:77,column:8},end:{line:77,column:46}},"31":{start:{line:78,column:8},end:{line:80,column:9}},"32":{start:{line:79,column:12},end:{line:79,column:56}},"33":{start:{line:81,column:8},end:{line:98,column:9}},"34":{start:{line:82,column:12},end:{line:82,column:94}},"35":{start:{line:83,column:12},end:{line:83,column:86}},"36":{start:{line:85,column:12},end:{line:95,column:13}},"37":{start:{line:86,column:16},end:{line:86,column:107}},"38":{start:{line:89,column:16},end:{line:94,column:17}},"39":{start:{line:90,column:20},end:{line:90,column:111}},"40":{start:{line:93,column:20},end:{line:93,column:139}},"41":{start:{line:96,column:12},end:{line:96,column:54}},"42":{start:{line:97,column:12},end:{line:97,column:16}},"43":{start:{line:99,column:8},end:{line:99,column:14}},"44":{start:{line:100,column:8},end:{line:109,column:9}},"45":{start:{line:101,column:12},end:{line:101,column:18}},"46":{start:{line:102,column:12},end:{line:107,column:13}},"47":{start:{line:103,column:16},end:{line:105,column:17}},"48":{start:{line:104,column:20},end:{line:104,column:56}},"49":{start:{line:106,column:16},end:{line:106,column:20}},"50":{start:{line:108,column:12},end:{line:108,column:16}},"51":{start:{line:110,column:8},end:{line:110,column:26}},"52":{start:{line:113,column:0},end:{line:113,column:26}},"53":{start:{line:114,column:14},end:{line:114,column:30}},"54":{start:{line:115,column:15},end:{line:115,column:17}},"55":{start:{line:116,column:14},end:{line:116,column:16}},"56":{start:{line:117,column:10},end:{line:117,column:12}},"57":{start:{line:118,column:16},end:{line:118,column:17}},"58":{start:{line:119,column:19},end:{line:119,column:23}},"59":{start:{line:120,column:0},end:{line:120,column:38}},"60":{start:{line:121,column:0},end:{line:121,column:23}},"61":{start:{line:122,column:0},end:{line:122,column:61}},"62":{start:{line:123,column:0},end:{line:123,column:22}},"63":{start:{line:124,column:0},end:{line:124,column:36}},"64":{start:{line:125,column:0},end:{line:125,column:18}},"65":{start:{line:126,column:15},end:{line:126,column:50}},"66":{start:{line:127,column:0},end:{line:127,column:67}},"67":{start:{line:128,column:0},end:{line:128,column:24}},"68":{start:{line:129,column:0},end:{line:139,column:1}},"69":{start:{line:130,column:4},end:{line:130,column:24}},"70":{start:{line:131,column:4},end:{line:131,column:67}},"71":{start:{line:133,column:5},end:{line:139,column:1}},"72":{start:{line:134,column:4},end:{line:134,column:25}},"73":{start:{line:135,column:4},end:{line:135,column:67}},"74":{start:{line:138,column:4},end:{line:138,column:39}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:4},end:{line:17,column:5}},loc:{start:{line:17,column:40},end:{line:21,column:5}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:4},end:{line:22,column:5}},loc:{start:{line:22,column:18},end:{line:24,column:5}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:25,column:4},end:{line:25,column:5}},loc:{start:{line:25,column:17},end:{line:27,column:5}},line:25},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:13},end:{line:30,column:5}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:37,column:4},end:{line:37,column:5}},loc:{start:{line:37,column:28},end:{line:44,column:5}},line:37},"5":{name:"(anonymous_5)",decl:{start:{line:51,column:4},end:{line:51,column:5}},loc:{start:{line:51,column:40},end:{line:60,column:5}},line:51},"6":{name:"(anonymous_6)",decl:{start:{line:66,column:4},end:{line:66,column:5}},loc:{start:{line:66,column:47},end:{line:111,column:5}},line:66}},branchMap:{"0":{loc:{start:{line:54,column:12},end:{line:57,column:13}},type:"if",locations:[{start:{line:54,column:12},end:{line:57,column:13}},{start:{line:54,column:12},end:{line:57,column:13}}],line:54},"1":{loc:{start:{line:78,column:8},end:{line:80,column:9}},type:"if",locations:[{start:{line:78,column:8},end:{line:80,column:9}},{start:{line:78,column:8},end:{line:80,column:9}}],line:78},"2":{loc:{start:{line:85,column:12},end:{line:95,column:13}},type:"if",locations:[{start:{line:85,column:12},end:{line:95,column:13}},{start:{line:85,column:12},end:{line:95,column:13}}],line:85},"3":{loc:{start:{line:89,column:16},end:{line:94,column:17}},type:"if",locations:[{start:{line:89,column:16},end:{line:94,column:17}},{start:{line:89,column:16},end:{line:94,column:17}}],line:89},"4":{loc:{start:{line:103,column:16},end:{line:105,column:17}},type:"if",locations:[{start:{line:103,column:16},end:{line:105,column:17}},{start:{line:103,column:16},end:{line:105,column:17}}],line:103},"5":{loc:{start:{line:129,column:0},end:{line:139,column:1}},type:"if",locations:[{start:{line:129,column:0},end:{line:139,column:1}},{start:{line:129,column:0},end:{line:139,column:1}}],line:129},"6":{loc:{start:{line:133,column:5},end:{line:139,column:1}},type:"if",locations:[{start:{line:133,column:5},end:{line:139,column:1}},{start:{line:133,column:5},end:{line:139,column:1}}],line:133}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,file:"/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts",sources:["/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts"],names:[],mappings:"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",sourcesContent:["/* eslint-disable valid-jsdoc */\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\n\n/**\n * Class where you can decypher a string\n */\nexport class Cifrado {\n  /**\n   * Constructor of the class\n   * @param alphabet Alphabet the user passes\n   * @param message Message to cypher or Decypher\n   * @param key Key of the cypher and decypher\n   */\n  constructor(private alphabet : string, private message : string,\n    private key : string) {}\n\n  getAlphabet() {\n    return this.alphabet;\n  }\n\n  getMessage() {\n    return this.message;\n  }\n\n  getKey() {\n    return this.key;\n  }\n\n  /**\n   * This method resizes the key in case the message lenght is higher\n   * @param message Message to cypher or Decypher\n   * @param key Key of the cypher and decypher\n   * @return The new Key with the new lenght\n   */\n  resizekey(message : string, key : string) {\n    let i = 0;\n    while (key.length < message.length) {\n      key += key.charAt(i);\n      i++;\n    }\n    return key;\n  }\n\n  /**\n   * This method gets the position on the alphabet of any string\n   * @param alphabet The full alphabet introduced by the user\n   * @param string Any string\n   * @return The letter position of any letter on the string\n   */\n  getLetterPosition(alphabet : string, string : string) {\n    let letterPosition = 0;\n    for (let i = 0; i < alphabet.length; i++) {\n      if (string === alphabet[i]) {\n        letterPosition = i;\n        break;\n      }\n    }\n\n    return letterPosition;\n  }\n\n  /**\n   * This method cypher or decypher a string\n   * @param selectOption This lets the user to select if he wants to cypher or decypher a string\n   * @returns The cypher or decypher string\n   */\n  umbreakableCypherandDecypher(selectOption : boolean) {\n    let newKey : string = this.getKey();\n    let newMessage : string = this.getMessage();\n    let cypherFunction = 0;\n    const cypherLetterPosition = [];\n    let i = 0;\n    let j = 0;\n    let messageLetterPosition = 0;\n    let keyLetterPosition = 0;\n    let resultText = '';\n\n    newKey = newKey.toLowerCase();\n    newMessage = newMessage.toLowerCase();\n\n    if (newKey.length < newMessage.length) {\n      newKey = this.resizekey(newMessage, newKey);\n    }\n\n    while ( i < newMessage.length) {\n      messageLetterPosition = this.getLetterPosition(this.getAlphabet(), newMessage[i]);\n      keyLetterPosition = this.getLetterPosition(this.getAlphabet(), newKey[i]);\n      // Cifrar una cadena\n      if (selectOption === true) {\n        cypherFunction = (messageLetterPosition + keyLetterPosition) % (this.getAlphabet().length);\n      } else {\n        if ((messageLetterPosition - keyLetterPosition) % (this.getAlphabet().length) >= 0) {\n          cypherFunction = (messageLetterPosition - keyLetterPosition) % (this.getAlphabet().length);\n        } else {\n          cypherFunction = (messageLetterPosition - keyLetterPosition + this.getAlphabet().length) % (this.getAlphabet().length);\n        }\n      }\n      cypherLetterPosition.push(cypherFunction);\n      i++;\n    }\n\n    i = 0;\n    while (i < newKey.length) {\n      j = 0;\n      while (j < this.getAlphabet().length) {\n        if (j === cypherLetterPosition[i]) {\n          resultText += this.getAlphabet()[j];\n        }\n        j++;\n      }\n      i++;\n    }\n\n    return resultText;\n  }\n}\n\nconst scanf = require('scanf');\nlet alphabet = '';\nlet message = '';\nlet key = '';\nlet selection = 0;\nlet selectOption = true;\n\nconsole.log('Introduzca un alfabeto');\nalphabet = scanf('%s');\n\nconsole.log('Introduzca un mensaje para cifrar o descifrar');\nmessage = scanf('%s');\n\nconsole.log('Introduzca una clave');\nkey = scanf('%s');\n\nconst prueba = new Cifrado(alphabet, message, key);\n\nconsole.log('\xBFQuiere cifrar o descifrar? (0-Cifrar, 1-Descifrar)');\nselection = scanf('%d');\n\nif (selection === 0) {\n  selectOption = true;\n  console.log(prueba.umbreakableCypherandDecypher(selectOption));\n} else if (selection === 1) {\n  selectOption = false;\n  console.log(prueba.umbreakableCypherandDecypher(selectOption));\n} else {\n  console.log('Opci\xF3n no soportada');\n}\n\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bebd06c12a572ea9372a86faea29f796b151b2ff"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1ukkxo9spu=function(){return actualCoverage;};}return actualCoverage;}cov_1ukkxo9spu();cov_1ukkxo9spu().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1ukkxo9spu().s[1]++;exports.Cifrado=void 0;/**
 * Class where you can decypher a string
 */class Cifrado{/**
     * Constructor of the class
     * @param alphabet Alphabet the user passes
     * @param message Message to cypher or Decypher
     * @param key Key of the cypher and decypher
     */constructor(alphabet,message,key){cov_1ukkxo9spu().f[0]++;cov_1ukkxo9spu().s[2]++;this.alphabet=alphabet;cov_1ukkxo9spu().s[3]++;this.message=message;cov_1ukkxo9spu().s[4]++;this.key=key;}getAlphabet(){cov_1ukkxo9spu().f[1]++;cov_1ukkxo9spu().s[5]++;return this.alphabet;}getMessage(){cov_1ukkxo9spu().f[2]++;cov_1ukkxo9spu().s[6]++;return this.message;}getKey(){cov_1ukkxo9spu().f[3]++;cov_1ukkxo9spu().s[7]++;return this.key;}/**
     * This method resizes the key in case the message lenght is higher
     * @param message Message to cypher or Decypher
     * @param key Key of the cypher and decypher
     * @return The new Key with the new lenght
     */resizekey(message,key){cov_1ukkxo9spu().f[4]++;let i=(cov_1ukkxo9spu().s[8]++,0);cov_1ukkxo9spu().s[9]++;while(key.length<message.length){cov_1ukkxo9spu().s[10]++;key+=key.charAt(i);cov_1ukkxo9spu().s[11]++;i++;}cov_1ukkxo9spu().s[12]++;return key;}/**
     * This method gets the position on the alphabet of any string
     * @param alphabet The full alphabet introduced by the user
     * @param string Any string
     * @return The letter position of any letter on the string
     */getLetterPosition(alphabet,string){cov_1ukkxo9spu().f[5]++;let letterPosition=(cov_1ukkxo9spu().s[13]++,0);cov_1ukkxo9spu().s[14]++;for(let i=(cov_1ukkxo9spu().s[15]++,0);i<alphabet.length;i++){cov_1ukkxo9spu().s[16]++;if(string===alphabet[i]){cov_1ukkxo9spu().b[0][0]++;cov_1ukkxo9spu().s[17]++;letterPosition=i;cov_1ukkxo9spu().s[18]++;break;}else{cov_1ukkxo9spu().b[0][1]++;}}cov_1ukkxo9spu().s[19]++;return letterPosition;}/**
     * This method cypher or decypher a string
     * @param selectOption This lets the user to select if he wants to cypher or decypher a string
     * @returns The cypher or decypher string
     */umbreakableCypherandDecypher(selectOption){cov_1ukkxo9spu().f[6]++;let newKey=(cov_1ukkxo9spu().s[20]++,this.getKey());let newMessage=(cov_1ukkxo9spu().s[21]++,this.getMessage());let cypherFunction=(cov_1ukkxo9spu().s[22]++,0);const cypherLetterPosition=(cov_1ukkxo9spu().s[23]++,[]);let i=(cov_1ukkxo9spu().s[24]++,0);let j=(cov_1ukkxo9spu().s[25]++,0);let messageLetterPosition=(cov_1ukkxo9spu().s[26]++,0);let keyLetterPosition=(cov_1ukkxo9spu().s[27]++,0);let resultText=(cov_1ukkxo9spu().s[28]++,'');cov_1ukkxo9spu().s[29]++;newKey=newKey.toLowerCase();cov_1ukkxo9spu().s[30]++;newMessage=newMessage.toLowerCase();cov_1ukkxo9spu().s[31]++;if(newKey.length<newMessage.length){cov_1ukkxo9spu().b[1][0]++;cov_1ukkxo9spu().s[32]++;newKey=this.resizekey(newMessage,newKey);}else{cov_1ukkxo9spu().b[1][1]++;}cov_1ukkxo9spu().s[33]++;while(i<newMessage.length){cov_1ukkxo9spu().s[34]++;messageLetterPosition=this.getLetterPosition(this.getAlphabet(),newMessage[i]);cov_1ukkxo9spu().s[35]++;keyLetterPosition=this.getLetterPosition(this.getAlphabet(),newKey[i]);// Cifrar una cadena
cov_1ukkxo9spu().s[36]++;if(selectOption===true){cov_1ukkxo9spu().b[2][0]++;cov_1ukkxo9spu().s[37]++;cypherFunction=(messageLetterPosition+keyLetterPosition)%this.getAlphabet().length;}else{cov_1ukkxo9spu().b[2][1]++;cov_1ukkxo9spu().s[38]++;if((messageLetterPosition-keyLetterPosition)%this.getAlphabet().length>=0){cov_1ukkxo9spu().b[3][0]++;cov_1ukkxo9spu().s[39]++;cypherFunction=(messageLetterPosition-keyLetterPosition)%this.getAlphabet().length;}else{cov_1ukkxo9spu().b[3][1]++;cov_1ukkxo9spu().s[40]++;cypherFunction=(messageLetterPosition-keyLetterPosition+this.getAlphabet().length)%this.getAlphabet().length;}}cov_1ukkxo9spu().s[41]++;cypherLetterPosition.push(cypherFunction);cov_1ukkxo9spu().s[42]++;i++;}cov_1ukkxo9spu().s[43]++;i=0;cov_1ukkxo9spu().s[44]++;while(i<newKey.length){cov_1ukkxo9spu().s[45]++;j=0;cov_1ukkxo9spu().s[46]++;while(j<this.getAlphabet().length){cov_1ukkxo9spu().s[47]++;if(j===cypherLetterPosition[i]){cov_1ukkxo9spu().b[4][0]++;cov_1ukkxo9spu().s[48]++;resultText+=this.getAlphabet()[j];}else{cov_1ukkxo9spu().b[4][1]++;}cov_1ukkxo9spu().s[49]++;j++;}cov_1ukkxo9spu().s[50]++;i++;}cov_1ukkxo9spu().s[51]++;return resultText;}}cov_1ukkxo9spu().s[52]++;exports.Cifrado=Cifrado;const scanf=(cov_1ukkxo9spu().s[53]++,require('scanf'));let alphabet=(cov_1ukkxo9spu().s[54]++,'');let message=(cov_1ukkxo9spu().s[55]++,'');let key=(cov_1ukkxo9spu().s[56]++,'');let selection=(cov_1ukkxo9spu().s[57]++,0);let selectOption=(cov_1ukkxo9spu().s[58]++,true);cov_1ukkxo9spu().s[59]++;console.log('Introduzca un alfabeto');cov_1ukkxo9spu().s[60]++;alphabet=scanf('%s');cov_1ukkxo9spu().s[61]++;console.log('Introduzca un mensaje para cifrar o descifrar');cov_1ukkxo9spu().s[62]++;message=scanf('%s');cov_1ukkxo9spu().s[63]++;console.log('Introduzca una clave');cov_1ukkxo9spu().s[64]++;key=scanf('%s');const prueba=(cov_1ukkxo9spu().s[65]++,new Cifrado(alphabet,message,key));cov_1ukkxo9spu().s[66]++;console.log('¿Quiere cifrar o descifrar? (0-Cifrar, 1-Descifrar)');cov_1ukkxo9spu().s[67]++;selection=scanf('%d');cov_1ukkxo9spu().s[68]++;if(selection===0){cov_1ukkxo9spu().b[5][0]++;cov_1ukkxo9spu().s[69]++;selectOption=true;cov_1ukkxo9spu().s[70]++;console.log(prueba.umbreakableCypherandDecypher(selectOption));}else{cov_1ukkxo9spu().b[5][1]++;cov_1ukkxo9spu().s[71]++;if(selection===1){cov_1ukkxo9spu().b[6][0]++;cov_1ukkxo9spu().s[72]++;selectOption=false;cov_1ukkxo9spu().s[73]++;console.log(prueba.umbreakableCypherandDecypher(selectOption));}else{cov_1ukkxo9spu().b[6][1]++;cov_1ukkxo9spu().s[74]++;console.log('Opción no soportada');}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvdXN1YXJpby91bGwtZXNpdC1pbmYtZHNpLTIxLTIyLXByY3QwNi1nZW5lcmljcy1zb2xpZC1QYWJsbzQwMC9jb2RlLXByMDYvc3JjL2VqZXJjaWNpby0zLnRzIiwic291cmNlcyI6WyIvaG9tZS91c3VhcmlvL3VsbC1lc2l0LWluZi1kc2ktMjEtMjItcHJjdDA2LWdlbmVyaWNzLXNvbGlkLVBhYmxvNDAwL2NvZGUtcHIwNi9zcmMvZWplcmNpY2lvLTMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLGdDQUFnQztBQUNoQyw0QkFBNEI7QUFDNUIsa0NBQWtDOzs7QUFFbEM7O0dBRUc7QUFDSCxNQUFhLE9BQU87SUFDbEI7Ozs7O09BS0c7SUFDSCxZQUFvQixRQUFpQixFQUFVLE9BQWdCLEVBQ3JELEdBQVk7UUFERixhQUFRLEdBQVIsUUFBUSxDQUFTO1FBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBUztRQUNyRCxRQUFHLEdBQUgsR0FBRyxDQUFTO0lBQUcsQ0FBQztJQUUxQixXQUFXO1FBQ1QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxNQUFNO1FBQ0osT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ2xCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFNBQVMsQ0FBQyxPQUFnQixFQUFFLEdBQVk7UUFDdEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsT0FBTyxHQUFHLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUU7WUFDbEMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsQ0FBQyxFQUFFLENBQUM7U0FDTDtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsaUJBQWlCLENBQUMsUUFBaUIsRUFBRSxNQUFlO1FBQ2xE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QUFDLEVBQUU7SUFDMUIsWUFBWSxHQUFHLEtBQUssQ0FBQztJQUNyQixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0NBQ2hFO0tBQU07SUFDTCxPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUM7Q0FDcEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuXG4vKipcbiAqIENsYXNzIHdoZXJlIHlvdSBjYW4gZGVjeXBoZXIgYSBzdHJpbmdcbiAqL1xuZXhwb3J0IGNsYXNzIENpZnJhZG8ge1xuICAvKipcbiAgICogQ29uc3RydWN0b3Igb2YgdGhlIGNsYXNzXG4gICAqIEBwYXJhbSBhbHBoYWJldCBBbHBoYWJldCB0aGUgdXNlciBwYXNzZXNcbiAgICogQHBhcmFtIG1lc3NhZ2UgTWVzc2FnZSB0byBjeXBoZXIgb3IgRGVjeXBoZXJcbiAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIGN5cGhlciBhbmQgZGVjeXBoZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWxwaGFiZXQgOiBzdHJpbmcsIHByaXZhdGUgbWVzc2FnZSA6IHN0cmluZyxcbiAgICBwcml2YXRlIGtleSA6IHN0cmluZykge31cblxuICBnZXRBbHBoYWJldCgpIHtcbiAgICByZXR1cm4gdGhpcy5hbHBoYWJldDtcbiAgfVxuXG4gIGdldE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgfVxuXG4gIGdldEtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5rZXk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmVzaXplcyB0aGUga2V5IGluIGNhc2UgdGhlIG1lc3NhZ2UgbGVuZ2h0IGlzIGhpZ2hlclxuICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIHRvIGN5cGhlciBvciBEZWN5cGhlclxuICAgKiBAcGFyYW0ga2V5IEtleSBvZiB0aGUgY3lwaGVyIGFuZCBkZWN5cGhlclxuICAgKiBAcmV0dXJuIFRoZSBuZXcgS2V5IHdpdGggdGhlIG5ldyBsZW5naHRcbiAgICovXG4gIHJlc2l6ZWtleShtZXNzYWdlIDogc3RyaW5nLCBrZXkgOiBzdHJpbmcpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGtleS5sZW5ndGggPCBtZXNzYWdlLmxlbmd0aCkge1xuICAgICAga2V5ICs9IGtleS5jaGFyQXQoaSk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZ2V0cyB0aGUgcG9zaXRpb24gb24gdGhlIGFscGhhYmV0IG9mIGFueSBzdHJpbmdcbiAgICogQHBhcmFtIGFscGhhYmV0IFRoZSBmdWxsIGFscGhhYmV0IGludHJvZHVjZWQgYnkgdGhlIHVzZXJcbiAgICogQHBhcmFtIHN0cmluZyBBbnkgc3RyaW5nXG4gICAqIEByZXR1cm4gVGhlIGxldHRlciBwb3NpdGlvbiBvZiBhbnkgbGV0dGVyIG9uIHRoZSBzdHJpbmdcbiAgICovXG4gIGdldExldHRlclBvc2l0aW9uKGFscGhhYmV0IDogc3RyaW5nLCBzdHJpbmcgOiBzdHJpbmcpIHtcbiAgICBsZXQgbGV0dGVyUG9zaXRpb24gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxwaGFiZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzdHJpbmcgPT09IGFscGhhYmV0W2ldKSB7XG4gICAgICAgIGxldHRlclBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxldHRlclBvc2l0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGN5cGhlciBvciBkZWN5cGhlciBhIHN0cmluZ1xuICAgKiBAcGFyYW0gc2VsZWN0T3B0aW9uIFRoaXMgbGV0cyB0aGUgdXNlciB0byBzZWxlY3QgaWYgaGUgd2FudHMgdG8gY3lwaGVyIG9yIGRlY3lwaGVyIGEgc3RyaW5nXG4gICAqIEByZXR1cm5zIFRoZSBjeXBoZXIgb3IgZGVjeXBoZXIgc3RyaW5nXG4gICAqL1xuICB1bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbiA6IGJvb2xlYW4pIHtcbiAgICBsZXQgbmV3S2V5IDogc3RyaW5nID0gdGhpcy5nZXRLZXkoKTtcbiAgICBsZXQgbmV3TWVzc2FnZSA6IHN0cmluZyA9IHRoaXMuZ2V0TWVzc2FnZSgpO1xuICAgIGxldCBjeXBoZXJGdW5jdGlvbiA9IDA7XG4gICAgY29uc3QgY3lwaGVyTGV0dGVyUG9zaXRpb24gPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGogPSAwO1xuICAgIGxldCBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSAwO1xuICAgIGxldCBrZXlMZXR0ZXJQb3NpdGlvbiA9IDA7XG4gICAgbGV0IHJlc3VsdFRleHQgPSAnJztcblxuICAgIG5ld0tleSA9IG5ld0tleS50b0xvd2VyQ2FzZSgpO1xuICAgIG5ld01lc3NhZ2UgPSBuZXdNZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobmV3S2V5Lmxlbmd0aCA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBuZXdLZXkgPSB0aGlzLnJlc2l6ZWtleShuZXdNZXNzYWdlLCBuZXdLZXkpO1xuICAgIH1cblxuICAgIHdoaWxlICggaSA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSB0aGlzLmdldExldHRlclBvc2l0aW9uKHRoaXMuZ2V0QWxwaGFiZXQoKSwgbmV3TWVzc2FnZVtpXSk7XG4gICAgICBrZXlMZXR0ZXJQb3NpdGlvbiA9IHRoaXMuZ2V0TGV0dGVyUG9zaXRpb24odGhpcy5nZXRBbHBoYWJldCgpLCBuZXdLZXlbaV0pO1xuICAgICAgLy8gQ2lmcmFyIHVuYSBjYWRlbmFcbiAgICAgIGlmIChzZWxlY3RPcHRpb24gPT09IHRydWUpIHtcbiAgICAgICAgY3lwaGVyRnVuY3Rpb24gPSAobWVzc2FnZUxldHRlclBvc2l0aW9uICsga2V5TGV0dGVyUG9zaXRpb24pICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbikgJSAodGhpcy5nZXRBbHBoYWJldCgpLmxlbmd0aCkgPj0gMCkge1xuICAgICAgICAgIGN5cGhlckZ1bmN0aW9uID0gKG1lc3NhZ2VMZXR0ZXJQb3NpdGlvbiAtIGtleUxldHRlclBvc2l0aW9uKSAlICh0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjeXBoZXJGdW5jdGlvbiA9IChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbiArIHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjeXBoZXJMZXR0ZXJQb3NpdGlvbi5wdXNoKGN5cGhlckZ1bmN0aW9uKTtcbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IG5ld0tleS5sZW5ndGgpIHtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCB0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKSB7XG4gICAgICAgIGlmIChqID09PSBjeXBoZXJMZXR0ZXJQb3NpdGlvbltpXSkge1xuICAgICAgICAgIHJlc3VsdFRleHQgKz0gdGhpcy5nZXRBbHBoYWJldCgpW2pdO1xuICAgICAgICB9XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0VGV4dDtcbiAgfVxufVxuXG5jb25zdCBzY2FuZiA9IHJlcXVpcmUoJ3NjYW5mJyk7XG5sZXQgYWxwaGFiZXQgPSAnJztcbmxldCBtZXNzYWdlID0gJyc7XG5sZXQga2V5ID0gJyc7XG5sZXQgc2VsZWN0aW9uID0gMDtcbmxldCBzZWxlY3RPcHRpb24gPSB0cnVlO1xuXG5jb25zb2xlLmxvZygnSW50cm9kdXpjYSB1biBhbGZhYmV0bycpO1xuYWxwaGFiZXQgPSBzY2FuZignJXMnKTtcblxuY29uc29sZS5sb2coJ0ludHJvZHV6Y2EgdW4gbWVuc2FqZSBwYXJhIGNpZnJhciBvIGRlc2NpZnJhcicpO1xubWVzc2FnZSA9IHNjYW5mKCclcycpO1xuXG5jb25zb2xlLmxvZygnSW50cm9kdXpjYSB1bmEgY2xhdmUnKTtcbmtleSA9IHNjYW5mKCclcycpO1xuXG5jb25zdCBwcnVlYmEgPSBuZXcgQ2lmcmFkbyhhbHBoYWJldCwgbWVzc2FnZSwga2V5KTtcblxuY29uc29sZS5sb2coJ8K/UXVpZXJlIGNpZnJhciBvIGRlc2NpZnJhcj8gKDAtQ2lmcmFyLCAxLURlc2NpZnJhciknKTtcbnNlbGVjdGlvbiA9IHNjYW5mKCclZCcpO1xuXG5pZiAoc2VsZWN0aW9uID09PSAwKSB7XG4gIHNlbGVjdE9wdGlvbiA9IHRydWU7XG4gIGNvbnNvbGUubG9nKHBydWViYS51bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbikpO1xufSBlbHNlIGlmIChzZWxlY3Rpb24gPT09IDEpIHtcbiAgc2VsZWN0T3B0aW9uID0gZmFsc2U7XG4gIGNvbnNvbGUubG9nKHBydWViYS51bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbikpO1xufSBlbHNlIHtcbiAgY29uc29sZS5sb2coJ09wY2nDs24gbm8gc29wb3J0YWRhJyk7XG59XG5cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDJCQUFHLEVBQUgsQ0FBUCxDQUNBLEdBQUkwQixVQUFTLDJCQUFHLENBQUgsQ0FBYixDQUNBLEdBQUlkLGFBQVksMkJBQUcsSUFBSCxDQUFoQixDLHlCQUVBZSxPQUFPLENBQUNDLEdBQVIsQ0FBWSx3QkFBWixFLHlCQUNBOUIsUUFBUSxDQUFHMEIsS0FBSyxDQUFDLElBQUQsQ0FBaEIsQyx5QkFFQUcsT0FBTyxDQUFDQyxHQUFSLENBQVksK0NBQVosRSx5QkFDQTdCLE9BQU8sQ0FBR3lCLEtBQUssQ0FBQyxJQUFELENBQWYsQyx5QkFFQUcsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosRSx5QkFDQTVCLEdBQUcsQ0FBR3dCLEtBQUssQ0FBQyxJQUFELENBQVgsQ0FFQSxLQUFNSyxPQUFNLDJCQUFHLEdBQUlqQyxRQUFKLENBQVlFLFFBQVosQ0FBc0JDLE9BQXRCLENBQStCQyxHQUEvQixDQUFILENBQVosQyx5QkFFQTJCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHFEQUFaLEUseUJBQ0FGLFNBQVMsQ0FBR0YsS0FBSyxDQUFDLElBQUQsQ0FBakIsQyx5QkFFQSxHQUFJRSxTQUFTLEdBQUssQ0FBbEIsQ0FBcUIscURBQ25CZCxZQUFZLENBQUcsSUFBZixDQURtQix5QkFFbkJlLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxNQUFNLENBQUNsQiw0QkFBUCxDQUFvQ0MsWUFBcEMsQ0FBWixFQUNELENBSEQsSUFHTyx3REFBSWMsU0FBUyxHQUFLLENBQWxCLENBQXFCLHFEQUMxQmQsWUFBWSxDQUFHLEtBQWYsQ0FEMEIseUJBRTFCZSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsTUFBTSxDQUFDbEIsNEJBQVAsQ0FBb0NDLFlBQXBDLENBQVosRUFDRCxDQUhNLElBR0EscURBQ0xlLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHFCQUFaLEVBQ0QiLCJuYW1lcyI6WyJDaWZyYWRvIiwiY29uc3RydWN0b3IiLCJhbHBoYWJldCIsIm1lc3NhZ2UiLCJrZXkiLCJnZXRBbHBoYWJldCIsImdldE1lc3NhZ2UiLCJnZXRLZXkiLCJyZXNpemVrZXkiLCJpIiwibGVuZ3RoIiwiY2hhckF0IiwiZ2V0TGV0dGVyUG9zaXRpb24iLCJzdHJpbmciLCJsZXR0ZXJQb3NpdGlvbiIsInVtYnJlYWthYmxlQ3lwaGVyYW5kRGVjeXBoZXIiLCJzZWxlY3RPcHRpb24iLCJuZXdLZXkiLCJuZXdNZXNzYWdlIiwiY3lwaGVyRnVuY3Rpb24iLCJjeXBoZXJMZXR0ZXJQb3NpdGlvbiIsImoiLCJtZXNzYWdlTGV0dGVyUG9zaXRpb24iLCJrZXlMZXR0ZXJQb3NpdGlvbiIsInJlc3VsdFRleHQiLCJ0b0xvd2VyQ2FzZSIsInB1c2giLCJleHBvcnRzIiwic2NhbmYiLCJyZXF1aXJlIiwic2VsZWN0aW9uIiwiY29uc29sZSIsImxvZyIsInBydWViYSJdLCJzb3VyY2VzIjpbIi9ob21lL3VzdWFyaW8vdWxsLWVzaXQtaW5mLWRzaS0yMS0yMi1wcmN0MDYtZ2VuZXJpY3Mtc29saWQtUGFibG80MDAvY29kZS1wcjA2L3NyYy9lamVyY2ljaW8tMy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVxdWlyZS1qc2RvYyAqL1xuXG4vKipcbiAqIENsYXNzIHdoZXJlIHlvdSBjYW4gZGVjeXBoZXIgYSBzdHJpbmdcbiAqL1xuZXhwb3J0IGNsYXNzIENpZnJhZG8ge1xuICAvKipcbiAgICogQ29uc3RydWN0b3Igb2YgdGhlIGNsYXNzXG4gICAqIEBwYXJhbSBhbHBoYWJldCBBbHBoYWJldCB0aGUgdXNlciBwYXNzZXNcbiAgICogQHBhcmFtIG1lc3NhZ2UgTWVzc2FnZSB0byBjeXBoZXIgb3IgRGVjeXBoZXJcbiAgICogQHBhcmFtIGtleSBLZXkgb2YgdGhlIGN5cGhlciBhbmQgZGVjeXBoZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWxwaGFiZXQgOiBzdHJpbmcsIHByaXZhdGUgbWVzc2FnZSA6IHN0cmluZyxcbiAgICBwcml2YXRlIGtleSA6IHN0cmluZykge31cblxuICBnZXRBbHBoYWJldCgpIHtcbiAgICByZXR1cm4gdGhpcy5hbHBoYWJldDtcbiAgfVxuXG4gIGdldE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgfVxuXG4gIGdldEtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5rZXk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmVzaXplcyB0aGUga2V5IGluIGNhc2UgdGhlIG1lc3NhZ2UgbGVuZ2h0IGlzIGhpZ2hlclxuICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIHRvIGN5cGhlciBvciBEZWN5cGhlclxuICAgKiBAcGFyYW0ga2V5IEtleSBvZiB0aGUgY3lwaGVyIGFuZCBkZWN5cGhlclxuICAgKiBAcmV0dXJuIFRoZSBuZXcgS2V5IHdpdGggdGhlIG5ldyBsZW5naHRcbiAgICovXG4gIHJlc2l6ZWtleShtZXNzYWdlIDogc3RyaW5nLCBrZXkgOiBzdHJpbmcpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGtleS5sZW5ndGggPCBtZXNzYWdlLmxlbmd0aCkge1xuICAgICAga2V5ICs9IGtleS5jaGFyQXQoaSk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZ2V0cyB0aGUgcG9zaXRpb24gb24gdGhlIGFscGhhYmV0IG9mIGFueSBzdHJpbmdcbiAgICogQHBhcmFtIGFscGhhYmV0IFRoZSBmdWxsIGFscGhhYmV0IGludHJvZHVjZWQgYnkgdGhlIHVzZXJcbiAgICogQHBhcmFtIHN0cmluZyBBbnkgc3RyaW5nXG4gICAqIEByZXR1cm4gVGhlIGxldHRlciBwb3NpdGlvbiBvZiBhbnkgbGV0dGVyIG9uIHRoZSBzdHJpbmdcbiAgICovXG4gIGdldExldHRlclBvc2l0aW9uKGFscGhhYmV0IDogc3RyaW5nLCBzdHJpbmcgOiBzdHJpbmcpIHtcbiAgICBsZXQgbGV0dGVyUG9zaXRpb24gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxwaGFiZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzdHJpbmcgPT09IGFscGhhYmV0W2ldKSB7XG4gICAgICAgIGxldHRlclBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxldHRlclBvc2l0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGN5cGhlciBvciBkZWN5cGhlciBhIHN0cmluZ1xuICAgKiBAcGFyYW0gc2VsZWN0T3B0aW9uIFRoaXMgbGV0cyB0aGUgdXNlciB0byBzZWxlY3QgaWYgaGUgd2FudHMgdG8gY3lwaGVyIG9yIGRlY3lwaGVyIGEgc3RyaW5nXG4gICAqIEByZXR1cm5zIFRoZSBjeXBoZXIgb3IgZGVjeXBoZXIgc3RyaW5nXG4gICAqL1xuICB1bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbiA6IGJvb2xlYW4pIHtcbiAgICBsZXQgbmV3S2V5IDogc3RyaW5nID0gdGhpcy5nZXRLZXkoKTtcbiAgICBsZXQgbmV3TWVzc2FnZSA6IHN0cmluZyA9IHRoaXMuZ2V0TWVzc2FnZSgpO1xuICAgIGxldCBjeXBoZXJGdW5jdGlvbiA9IDA7XG4gICAgY29uc3QgY3lwaGVyTGV0dGVyUG9zaXRpb24gPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGogPSAwO1xuICAgIGxldCBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSAwO1xuICAgIGxldCBrZXlMZXR0ZXJQb3NpdGlvbiA9IDA7XG4gICAgbGV0IHJlc3VsdFRleHQgPSAnJztcblxuICAgIG5ld0tleSA9IG5ld0tleS50b0xvd2VyQ2FzZSgpO1xuICAgIG5ld01lc3NhZ2UgPSBuZXdNZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobmV3S2V5Lmxlbmd0aCA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBuZXdLZXkgPSB0aGlzLnJlc2l6ZWtleShuZXdNZXNzYWdlLCBuZXdLZXkpO1xuICAgIH1cblxuICAgIHdoaWxlICggaSA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSB0aGlzLmdldExldHRlclBvc2l0aW9uKHRoaXMuZ2V0QWxwaGFiZXQoKSwgbmV3TWVzc2FnZVtpXSk7XG4gICAgICBrZXlMZXR0ZXJQb3NpdGlvbiA9IHRoaXMuZ2V0TGV0dGVyUG9zaXRpb24odGhpcy5nZXRBbHBoYWJldCgpLCBuZXdLZXlbaV0pO1xuICAgICAgLy8gQ2lmcmFyIHVuYSBjYWRlbmFcbiAgICAgIGlmIChzZWxlY3RPcHRpb24gPT09IHRydWUpIHtcbiAgICAgICAgY3lwaGVyRnVuY3Rpb24gPSAobWVzc2FnZUxldHRlclBvc2l0aW9uICsga2V5TGV0dGVyUG9zaXRpb24pICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbikgJSAodGhpcy5nZXRBbHBoYWJldCgpLmxlbmd0aCkgPj0gMCkge1xuICAgICAgICAgIGN5cGhlckZ1bmN0aW9uID0gKG1lc3NhZ2VMZXR0ZXJQb3NpdGlvbiAtIGtleUxldHRlclBvc2l0aW9uKSAlICh0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjeXBoZXJGdW5jdGlvbiA9IChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbiArIHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjeXBoZXJMZXR0ZXJQb3NpdGlvbi5wdXNoKGN5cGhlckZ1bmN0aW9uKTtcbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IG5ld0tleS5sZW5ndGgpIHtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCB0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKSB7XG4gICAgICAgIGlmIChqID09PSBjeXBoZXJMZXR0ZXJQb3NpdGlvbltpXSkge1xuICAgICAgICAgIHJlc3VsdFRleHQgKz0gdGhpcy5nZXRBbHBoYWJldCgpW2pdO1xuICAgICAgICB9XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0VGV4dDtcbiAgfVxufVxuXG5jb25zdCBzY2FuZiA9IHJlcXVpcmUoJ3NjYW5mJyk7XG5sZXQgYWxwaGFiZXQgPSAnJztcbmxldCBtZXNzYWdlID0gJyc7XG5sZXQga2V5ID0gJyc7XG5sZXQgc2VsZWN0aW9uID0gMDtcbmxldCBzZWxlY3RPcHRpb24gPSB0cnVlO1xuXG5jb25zb2xlLmxvZygnSW50cm9kdXpjYSB1biBhbGZhYmV0bycpO1xuYWxwaGFiZXQgPSBzY2FuZignJXMnKTtcblxuY29uc29sZS5sb2coJ0ludHJvZHV6Y2EgdW4gbWVuc2FqZSBwYXJhIGNpZnJhciBvIGRlc2NpZnJhcicpO1xubWVzc2FnZSA9IHNjYW5mKCclcycpO1xuXG5jb25zb2xlLmxvZygnSW50cm9kdXpjYSB1bmEgY2xhdmUnKTtcbmtleSA9IHNjYW5mKCclcycpO1xuXG5jb25zdCBwcnVlYmEgPSBuZXcgQ2lmcmFkbyhhbHBoYWJldCwgbWVzc2FnZSwga2V5KTtcblxuY29uc29sZS5sb2coJ8K/UXVpZXJlIGNpZnJhciBvIGRlc2NpZnJhcj8gKDAtQ2lmcmFyLCAxLURlc2NpZnJhciknKTtcbnNlbGVjdGlvbiA9IHNjYW5mKCclZCcpO1xuXG5pZiAoc2VsZWN0aW9uID09PSAwKSB7XG4gIHNlbGVjdE9wdGlvbiA9IHRydWU7XG4gIGNvbnNvbGUubG9nKHBydWViYS51bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbikpO1xufSBlbHNlIGlmIChzZWxlY3Rpb24gPT09IDEpIHtcbiAgc2VsZWN0T3B0aW9uID0gZmFsc2U7XG4gIGNvbnNvbGUubG9nKHBydWViYS51bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbikpO1xufSBlbHNlIHtcbiAgY29uc29sZS5sb2coJ09wY2nDs24gbm8gc29wb3J0YWRhJyk7XG59XG5cbiJdfQ==