"use strict";/* eslint-disable no-unused-vars */ /* eslint-disable max-len */ /* eslint-disable require-jsdoc */function cov_1ukkxo9spu(){var path="/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts";var hash="a51e5828369d9eb40476518236bf465800309707";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts",statementMap:{"0":{start:{line:5,column:0},end:{line:5,column:62}},"1":{start:{line:6,column:0},end:{line:6,column:39}},"2":{start:{line:9,column:8},end:{line:9,column:33}},"3":{start:{line:10,column:8},end:{line:10,column:31}},"4":{start:{line:11,column:8},end:{line:11,column:23}},"5":{start:{line:14,column:8},end:{line:14,column:29}},"6":{start:{line:17,column:8},end:{line:17,column:28}},"7":{start:{line:20,column:8},end:{line:20,column:24}},"8":{start:{line:23,column:16},end:{line:23,column:17}},"9":{start:{line:24,column:8},end:{line:27,column:9}},"10":{start:{line:25,column:12},end:{line:25,column:33}},"11":{start:{line:26,column:12},end:{line:26,column:16}},"12":{start:{line:28,column:8},end:{line:28,column:19}},"13":{start:{line:31,column:29},end:{line:31,column:30}},"14":{start:{line:32,column:8},end:{line:37,column:9}},"15":{start:{line:32,column:21},end:{line:32,column:22}},"16":{start:{line:33,column:12},end:{line:36,column:13}},"17":{start:{line:34,column:16},end:{line:34,column:35}},"18":{start:{line:35,column:16},end:{line:35,column:22}},"19":{start:{line:38,column:8},end:{line:38,column:30}},"20":{start:{line:41,column:21},end:{line:41,column:34}},"21":{start:{line:42,column:25},end:{line:42,column:42}},"22":{start:{line:43,column:29},end:{line:43,column:30}},"23":{start:{line:44,column:37},end:{line:44,column:39}},"24":{start:{line:45,column:16},end:{line:45,column:17}},"25":{start:{line:46,column:16},end:{line:46,column:17}},"26":{start:{line:47,column:36},end:{line:47,column:37}},"27":{start:{line:48,column:32},end:{line:48,column:33}},"28":{start:{line:49,column:25},end:{line:49,column:27}},"29":{start:{line:50,column:8},end:{line:50,column:38}},"30":{start:{line:51,column:8},end:{line:51,column:46}},"31":{start:{line:52,column:8},end:{line:54,column:9}},"32":{start:{line:53,column:12},end:{line:53,column:56}},"33":{start:{line:55,column:8},end:{line:72,column:9}},"34":{start:{line:56,column:12},end:{line:56,column:94}},"35":{start:{line:57,column:12},end:{line:57,column:86}},"36":{start:{line:59,column:12},end:{line:69,column:13}},"37":{start:{line:60,column:16},end:{line:60,column:107}},"38":{start:{line:63,column:16},end:{line:68,column:17}},"39":{start:{line:64,column:20},end:{line:64,column:111}},"40":{start:{line:67,column:20},end:{line:67,column:139}},"41":{start:{line:70,column:12},end:{line:70,column:54}},"42":{start:{line:71,column:12},end:{line:71,column:16}},"43":{start:{line:73,column:8},end:{line:73,column:14}},"44":{start:{line:74,column:8},end:{line:83,column:9}},"45":{start:{line:75,column:12},end:{line:75,column:18}},"46":{start:{line:76,column:12},end:{line:81,column:13}},"47":{start:{line:77,column:16},end:{line:79,column:17}},"48":{start:{line:78,column:20},end:{line:78,column:56}},"49":{start:{line:80,column:16},end:{line:80,column:20}},"50":{start:{line:82,column:12},end:{line:82,column:16}},"51":{start:{line:84,column:8},end:{line:84,column:26}},"52":{start:{line:87,column:0},end:{line:87,column:54}},"53":{start:{line:88,column:15},end:{line:88,column:87}},"54":{start:{line:89,column:0},end:{line:89,column:55}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:40},end:{line:12,column:5}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:4},end:{line:13,column:5}},loc:{start:{line:13,column:18},end:{line:15,column:5}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:17},end:{line:18,column:5}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:4},end:{line:19,column:5}},loc:{start:{line:19,column:13},end:{line:21,column:5}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:22,column:4},end:{line:22,column:5}},loc:{start:{line:22,column:28},end:{line:29,column:5}},line:22},"5":{name:"(anonymous_5)",decl:{start:{line:30,column:4},end:{line:30,column:5}},loc:{start:{line:30,column:40},end:{line:39,column:5}},line:30},"6":{name:"(anonymous_6)",decl:{start:{line:40,column:4},end:{line:40,column:5}},loc:{start:{line:40,column:47},end:{line:85,column:5}},line:40}},branchMap:{"0":{loc:{start:{line:33,column:12},end:{line:36,column:13}},type:"if",locations:[{start:{line:33,column:12},end:{line:36,column:13}},{start:{line:33,column:12},end:{line:36,column:13}}],line:33},"1":{loc:{start:{line:52,column:8},end:{line:54,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:54,column:9}},{start:{line:52,column:8},end:{line:54,column:9}}],line:52},"2":{loc:{start:{line:59,column:12},end:{line:69,column:13}},type:"if",locations:[{start:{line:59,column:12},end:{line:69,column:13}},{start:{line:59,column:12},end:{line:69,column:13}}],line:59},"3":{loc:{start:{line:63,column:16},end:{line:68,column:17}},type:"if",locations:[{start:{line:63,column:16},end:{line:68,column:17}},{start:{line:63,column:16},end:{line:68,column:17}}],line:63},"4":{loc:{start:{line:77,column:16},end:{line:79,column:17}},type:"if",locations:[{start:{line:77,column:16},end:{line:79,column:17}},{start:{line:77,column:16},end:{line:79,column:17}}],line:77}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts",sources:["/home/usuario/ull-esit-inf-dsi-21-22-prct06-generics-solid-Pablo400/code-pr06/src/ejercicio-3.ts"],names:[],mappings:"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",sourcesContent:["/* eslint-disable no-unused-vars */\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\n\nexport class UnbreakableEncryption {\n  constructor(private alphabet : string, private message : string,\n    private key : string) {}\n\n  getAlphabet() {\n    return this.alphabet;\n  }\n\n  getMessage() {\n    return this.message;\n  }\n\n  getKey() {\n    return this.key;\n  }\n\n  resizekey(message : string, key : string) {\n    let i = 0;\n    while (key.length < message.length) {\n      key += key.charAt(i);\n      i++;\n    }\n    return key;\n  }\n\n  getLetterPosition(alphabet : string, string : string) {\n    let letterPosition = 0;\n    for (let i = 0; i < alphabet.length; i++) {\n      if (string === alphabet[i]) {\n        letterPosition = i;\n        break;\n      }\n    }\n\n    return letterPosition;\n  }\n\n  umbreakableCypherandDecypher(selectOption : boolean) {\n    let newKey : string = this.getKey();\n    let newMessage : string = this.getMessage();\n    let cypherFunction = 0;\n    const cypherLetterPosition = [];\n    let i = 0;\n    let j = 0;\n    let messageLetterPosition = 0;\n    let keyLetterPosition = 0;\n    let cypherText = '';\n\n    newKey = newKey.toLowerCase();\n    newMessage = newMessage.toLowerCase();\n\n    if (newKey.length < newMessage.length) {\n      newKey = this.resizekey(newKey, newMessage);\n    }\n\n    while ( i < newMessage.length) {\n      messageLetterPosition = this.getLetterPosition(this.getAlphabet(), newMessage[i]);\n      keyLetterPosition = this.getLetterPosition(this.getAlphabet(), newKey[i]);\n      // Cifrar una cadena\n      if (selectOption === true) {\n        cypherFunction = (messageLetterPosition + keyLetterPosition) % (this.getAlphabet().length);\n      } else {\n        if ((messageLetterPosition - keyLetterPosition) % (this.getAlphabet().length) >= 0) {\n          cypherFunction = (messageLetterPosition - keyLetterPosition) % (this.getAlphabet().length);\n        } else {\n          cypherFunction = (messageLetterPosition - keyLetterPosition + this.getAlphabet().length) % (this.getAlphabet().length);\n        }\n      }\n      cypherLetterPosition.push(cypherFunction);\n      i++;\n    }\n\n    i = 0;\n    while (i < newKey.length) {\n      j = 0;\n      while (j < this.getAlphabet().length) {\n        if (j === cypherLetterPosition[i]) {\n          cypherText += this.getAlphabet()[j];\n        }\n        j++;\n      }\n      i++;\n    }\n\n    return cypherText;\n  }\n}\n\nconst prueba = new UnbreakableEncryption('abcdefghijklmnopqrstuvwxyz', 'Hola', 'clave');\n\nconsole.log(prueba.umbreakableCypherandDecypher(true));\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a51e5828369d9eb40476518236bf465800309707"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1ukkxo9spu=function(){return actualCoverage;};}return actualCoverage;}cov_1ukkxo9spu();cov_1ukkxo9spu().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1ukkxo9spu().s[1]++;exports.UnbreakableEncryption=void 0;class UnbreakableEncryption{constructor(alphabet,message,key){cov_1ukkxo9spu().f[0]++;cov_1ukkxo9spu().s[2]++;this.alphabet=alphabet;cov_1ukkxo9spu().s[3]++;this.message=message;cov_1ukkxo9spu().s[4]++;this.key=key;}getAlphabet(){cov_1ukkxo9spu().f[1]++;cov_1ukkxo9spu().s[5]++;return this.alphabet;}getMessage(){cov_1ukkxo9spu().f[2]++;cov_1ukkxo9spu().s[6]++;return this.message;}getKey(){cov_1ukkxo9spu().f[3]++;cov_1ukkxo9spu().s[7]++;return this.key;}resizekey(message,key){cov_1ukkxo9spu().f[4]++;let i=(cov_1ukkxo9spu().s[8]++,0);cov_1ukkxo9spu().s[9]++;while(key.length<message.length){cov_1ukkxo9spu().s[10]++;key+=key.charAt(i);cov_1ukkxo9spu().s[11]++;i++;}cov_1ukkxo9spu().s[12]++;return key;}getLetterPosition(alphabet,string){cov_1ukkxo9spu().f[5]++;let letterPosition=(cov_1ukkxo9spu().s[13]++,0);cov_1ukkxo9spu().s[14]++;for(let i=(cov_1ukkxo9spu().s[15]++,0);i<alphabet.length;i++){cov_1ukkxo9spu().s[16]++;if(string===alphabet[i]){cov_1ukkxo9spu().b[0][0]++;cov_1ukkxo9spu().s[17]++;letterPosition=i;cov_1ukkxo9spu().s[18]++;break;}else{cov_1ukkxo9spu().b[0][1]++;}}cov_1ukkxo9spu().s[19]++;return letterPosition;}umbreakableCypherandDecypher(selectOption){cov_1ukkxo9spu().f[6]++;let newKey=(cov_1ukkxo9spu().s[20]++,this.getKey());let newMessage=(cov_1ukkxo9spu().s[21]++,this.getMessage());let cypherFunction=(cov_1ukkxo9spu().s[22]++,0);const cypherLetterPosition=(cov_1ukkxo9spu().s[23]++,[]);let i=(cov_1ukkxo9spu().s[24]++,0);let j=(cov_1ukkxo9spu().s[25]++,0);let messageLetterPosition=(cov_1ukkxo9spu().s[26]++,0);let keyLetterPosition=(cov_1ukkxo9spu().s[27]++,0);let cypherText=(cov_1ukkxo9spu().s[28]++,'');cov_1ukkxo9spu().s[29]++;newKey=newKey.toLowerCase();cov_1ukkxo9spu().s[30]++;newMessage=newMessage.toLowerCase();cov_1ukkxo9spu().s[31]++;if(newKey.length<newMessage.length){cov_1ukkxo9spu().b[1][0]++;cov_1ukkxo9spu().s[32]++;newKey=this.resizekey(newKey,newMessage);}else{cov_1ukkxo9spu().b[1][1]++;}cov_1ukkxo9spu().s[33]++;while(i<newMessage.length){cov_1ukkxo9spu().s[34]++;messageLetterPosition=this.getLetterPosition(this.getAlphabet(),newMessage[i]);cov_1ukkxo9spu().s[35]++;keyLetterPosition=this.getLetterPosition(this.getAlphabet(),newKey[i]);// Cifrar una cadena
cov_1ukkxo9spu().s[36]++;if(selectOption===true){cov_1ukkxo9spu().b[2][0]++;cov_1ukkxo9spu().s[37]++;cypherFunction=(messageLetterPosition+keyLetterPosition)%this.getAlphabet().length;}else{cov_1ukkxo9spu().b[2][1]++;cov_1ukkxo9spu().s[38]++;if((messageLetterPosition-keyLetterPosition)%this.getAlphabet().length>=0){cov_1ukkxo9spu().b[3][0]++;cov_1ukkxo9spu().s[39]++;cypherFunction=(messageLetterPosition-keyLetterPosition)%this.getAlphabet().length;}else{cov_1ukkxo9spu().b[3][1]++;cov_1ukkxo9spu().s[40]++;cypherFunction=(messageLetterPosition-keyLetterPosition+this.getAlphabet().length)%this.getAlphabet().length;}}cov_1ukkxo9spu().s[41]++;cypherLetterPosition.push(cypherFunction);cov_1ukkxo9spu().s[42]++;i++;}cov_1ukkxo9spu().s[43]++;i=0;cov_1ukkxo9spu().s[44]++;while(i<newKey.length){cov_1ukkxo9spu().s[45]++;j=0;cov_1ukkxo9spu().s[46]++;while(j<this.getAlphabet().length){cov_1ukkxo9spu().s[47]++;if(j===cypherLetterPosition[i]){cov_1ukkxo9spu().b[4][0]++;cov_1ukkxo9spu().s[48]++;cypherText+=this.getAlphabet()[j];}else{cov_1ukkxo9spu().b[4][1]++;}cov_1ukkxo9spu().s[49]++;j++;}cov_1ukkxo9spu().s[50]++;i++;}cov_1ukkxo9spu().s[51]++;return cypherText;}}cov_1ukkxo9spu().s[52]++;exports.UnbreakableEncryption=UnbreakableEncryption;const prueba=(cov_1ukkxo9spu().s[53]++,new UnbreakableEncryption('abcdefghijklmnopqrstuvwxyz','Hola','clave'));cov_1ukkxo9spu().s[54]++;console.log(prueba.umbreakableCypherandDecypher(true));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvdXN1YXJpby91bGwtZXNpdC1pbmYtZHNpLTIxLTIyLXByY3QwNi1nZW5lcmljcy1zb2xpZC1QYWJsbzQwMC9jb2RlLXByMDYvc3JjL2VqZXJjaWNpby0zLnRzIiwic291cmNlcyI6WyIvaG9tZS91c3VhcmlvL3VsbC1lc2l0LWluZi1kc2ktMjEtMjItcHJjdDA2LWdlbmVyaWNzLXNvbGlkLVBhYmxvNDAwL2NvZGUtcHIwNi9zcmMvZWplcmNpY2lvLTMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1DQUFtQztBQUNuQyw0QkFBNEI7QUFDNUIsa0NBQWtDOzs7QUFFbEMsTUFBYSxxQkFBcUI7SUFDaEMsWUFBb0IsUUFBaUIsRUFBVSxPQUFnQixFQUNyRCxHQUFZO1FBREYsYUFBUSxHQUFSLFFBQVEsQ0FBUztRQUFVLFlBQU8sR0FBUCxPQUFPLENBQVM7UUFDckQsUUFBRyxHQUFILEdBQUcsQ0FBUztJQUFHLENBQUM7SUFFMUIsV0FBVztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBRUQsVUFBVTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBRUQsTUFBTTtRQUNKLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBRUQsU0FBUyxDQUFDLE9BQWdCLEVBQUUsR0FBWTtRQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixPQUFPLEdBQUcsQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRTtZQUNsQyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQixDQUFDLEVBQUUsQ0FBQztTQUNMO1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDO0lBRUQsaUJBQWlCLENBQUMsUUFBaUIsRUFBRSxNQUFlO1FBQ2xELElBQUksY0FBYyxHQUFHLENBQUMsQ0FBQztRQUN2QixLQUFLLElBQUksQ0FBQyxHQUFH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QUNMO1lBQ0QsQ0FBQyxFQUFFLENBQUM7U0FDTDtRQUVELE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7Q0FDRjtBQXRGRCxzREFzRkM7QUFFRCxNQUFNLE1BQU0sR0FBRyxJQUFJLHFCQUFxQixDQUFDLDRCQUE0QixFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUV4RixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cblxuZXhwb3J0IGNsYXNzIFVuYnJlYWthYmxlRW5jcnlwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWxwaGFiZXQgOiBzdHJpbmcsIHByaXZhdGUgbWVzc2FnZSA6IHN0cmluZyxcbiAgICBwcml2YXRlIGtleSA6IHN0cmluZykge31cblxuICBnZXRBbHBoYWJldCgpIHtcbiAgICByZXR1cm4gdGhpcy5hbHBoYWJldDtcbiAgfVxuXG4gIGdldE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgfVxuXG4gIGdldEtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5rZXk7XG4gIH1cblxuICByZXNpemVrZXkobWVzc2FnZSA6IHN0cmluZywga2V5IDogc3RyaW5nKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChrZXkubGVuZ3RoIDwgbWVzc2FnZS5sZW5ndGgpIHtcbiAgICAgIGtleSArPSBrZXkuY2hhckF0KGkpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgZ2V0TGV0dGVyUG9zaXRpb24oYWxwaGFiZXQgOiBzdHJpbmcsIHN0cmluZyA6IHN0cmluZykge1xuICAgIGxldCBsZXR0ZXJQb3NpdGlvbiA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbHBoYWJldC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHN0cmluZyA9PT0gYWxwaGFiZXRbaV0pIHtcbiAgICAgICAgbGV0dGVyUG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGV0dGVyUG9zaXRpb247XG4gIH1cblxuICB1bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbiA6IGJvb2xlYW4pIHtcbiAgICBsZXQgbmV3S2V5IDogc3RyaW5nID0gdGhpcy5nZXRLZXkoKTtcbiAgICBsZXQgbmV3TWVzc2FnZSA6IHN0cmluZyA9IHRoaXMuZ2V0TWVzc2FnZSgpO1xuICAgIGxldCBjeXBoZXJGdW5jdGlvbiA9IDA7XG4gICAgY29uc3QgY3lwaGVyTGV0dGVyUG9zaXRpb24gPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGogPSAwO1xuICAgIGxldCBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSAwO1xuICAgIGxldCBrZXlMZXR0ZXJQb3NpdGlvbiA9IDA7XG4gICAgbGV0IGN5cGhlclRleHQgPSAnJztcblxuICAgIG5ld0tleSA9IG5ld0tleS50b0xvd2VyQ2FzZSgpO1xuICAgIG5ld01lc3NhZ2UgPSBuZXdNZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobmV3S2V5Lmxlbmd0aCA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBuZXdLZXkgPSB0aGlzLnJlc2l6ZWtleShuZXdLZXksIG5ld01lc3NhZ2UpO1xuICAgIH1cblxuICAgIHdoaWxlICggaSA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSB0aGlzLmdldExldHRlclBvc2l0aW9uKHRoaXMuZ2V0QWxwaGFiZXQoKSwgbmV3TWVzc2FnZVtpXSk7XG4gICAgICBrZXlMZXR0ZXJQb3NpdGlvbiA9IHRoaXMuZ2V0TGV0dGVyUG9zaXRpb24odGhpcy5nZXRBbHBoYWJldCgpLCBuZXdLZXlbaV0pO1xuICAgICAgLy8gQ2lmcmFyIHVuYSBjYWRlbmFcbiAgICAgIGlmIChzZWxlY3RPcHRpb24gPT09IHRydWUpIHtcbiAgICAgICAgY3lwaGVyRnVuY3Rpb24gPSAobWVzc2FnZUxldHRlclBvc2l0aW9uICsga2V5TGV0dGVyUG9zaXRpb24pICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbikgJSAodGhpcy5nZXRBbHBoYWJldCgpLmxlbmd0aCkgPj0gMCkge1xuICAgICAgICAgIGN5cGhlckZ1bmN0aW9uID0gKG1lc3NhZ2VMZXR0ZXJQb3NpdGlvbiAtIGtleUxldHRlclBvc2l0aW9uKSAlICh0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjeXBoZXJGdW5jdGlvbiA9IChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbiArIHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjeXBoZXJMZXR0ZXJQb3NpdGlvbi5wdXNoKGN5cGhlckZ1bmN0aW9uKTtcbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IG5ld0tleS5sZW5ndGgpIHtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCB0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKSB7XG4gICAgICAgIGlmIChqID09PSBjeXBoZXJMZXR0ZXJQb3NpdGlvbltpXSkge1xuICAgICAgICAgIGN5cGhlclRleHQgKz0gdGhpcy5nZXRBbHBoYWJldCgpW2pdO1xuICAgICAgICB9XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4gY3lwaGVyVGV4dDtcbiAgfVxufVxuXG5jb25zdCBwcnVlYmEgPSBuZXcgVW5icmVha2FibGVFbmNyeXB0aW9uKCdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsICdIb2xhJywgJ2NsYXZlJyk7XG5cbmNvbnNvbGUubG9nKHBydWViYS51bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHRydWUpKTtcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YmxlRW5jcnlwdGlvbiIsImNvbnN0cnVjdG9yIiwiYWxwaGFiZXQiLCJtZXNzYWdlIiwia2V5IiwiZ2V0QWxwaGFiZXQiLCJnZXRNZXNzYWdlIiwiZ2V0S2V5IiwicmVzaXpla2V5IiwiaSIsImxlbmd0aCIsImNoYXJBdCIsImdldExldHRlclBvc2l0aW9uIiwic3RyaW5nIiwibGV0dGVyUG9zaXRpb24iLCJ1bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyIiwic2VsZWN0T3B0aW9uIiwibmV3S2V5IiwibmV3TWVzc2FnZSIsImN5cGhlckZ1bmN0aW9uIiwiY3lwaGVyTGV0dGVyUG9zaXRpb24iLCJqIiwibWVzc2FnZUxldHRlclBvc2l0aW9uIiwia2V5TGV0dGVyUG9zaXRpb24iLCJjeXBoZXJUZXh0IiwidG9Mb3dlckNhc2UiLCJwdXNoIiwiZXhwb3J0cyIsInBydWViYSIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlcyI6WyIvaG9tZS91c3VhcmlvL3VsbC1lc2l0LWluZi1kc2ktMjEtMjItcHJjdDA2LWdlbmVyaWNzLXNvbGlkLVBhYmxvNDAwL2NvZGUtcHIwNi9zcmMvZWplcmNpY2lvLTMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MgKi9cblxuZXhwb3J0IGNsYXNzIFVuYnJlYWthYmxlRW5jcnlwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWxwaGFiZXQgOiBzdHJpbmcsIHByaXZhdGUgbWVzc2FnZSA6IHN0cmluZyxcbiAgICBwcml2YXRlIGtleSA6IHN0cmluZykge31cblxuICBnZXRBbHBoYWJldCgpIHtcbiAgICByZXR1cm4gdGhpcy5hbHBoYWJldDtcbiAgfVxuXG4gIGdldE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgfVxuXG4gIGdldEtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5rZXk7XG4gIH1cblxuICByZXNpemVrZXkobWVzc2FnZSA6IHN0cmluZywga2V5IDogc3RyaW5nKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChrZXkubGVuZ3RoIDwgbWVzc2FnZS5sZW5ndGgpIHtcbiAgICAgIGtleSArPSBrZXkuY2hhckF0KGkpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgZ2V0TGV0dGVyUG9zaXRpb24oYWxwaGFiZXQgOiBzdHJpbmcsIHN0cmluZyA6IHN0cmluZykge1xuICAgIGxldCBsZXR0ZXJQb3NpdGlvbiA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbHBoYWJldC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHN0cmluZyA9PT0gYWxwaGFiZXRbaV0pIHtcbiAgICAgICAgbGV0dGVyUG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGV0dGVyUG9zaXRpb247XG4gIH1cblxuICB1bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHNlbGVjdE9wdGlvbiA6IGJvb2xlYW4pIHtcbiAgICBsZXQgbmV3S2V5IDogc3RyaW5nID0gdGhpcy5nZXRLZXkoKTtcbiAgICBsZXQgbmV3TWVzc2FnZSA6IHN0cmluZyA9IHRoaXMuZ2V0TWVzc2FnZSgpO1xuICAgIGxldCBjeXBoZXJGdW5jdGlvbiA9IDA7XG4gICAgY29uc3QgY3lwaGVyTGV0dGVyUG9zaXRpb24gPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGogPSAwO1xuICAgIGxldCBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSAwO1xuICAgIGxldCBrZXlMZXR0ZXJQb3NpdGlvbiA9IDA7XG4gICAgbGV0IGN5cGhlclRleHQgPSAnJztcblxuICAgIG5ld0tleSA9IG5ld0tleS50b0xvd2VyQ2FzZSgpO1xuICAgIG5ld01lc3NhZ2UgPSBuZXdNZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobmV3S2V5Lmxlbmd0aCA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBuZXdLZXkgPSB0aGlzLnJlc2l6ZWtleShuZXdLZXksIG5ld01lc3NhZ2UpO1xuICAgIH1cblxuICAgIHdoaWxlICggaSA8IG5ld01lc3NhZ2UubGVuZ3RoKSB7XG4gICAgICBtZXNzYWdlTGV0dGVyUG9zaXRpb24gPSB0aGlzLmdldExldHRlclBvc2l0aW9uKHRoaXMuZ2V0QWxwaGFiZXQoKSwgbmV3TWVzc2FnZVtpXSk7XG4gICAgICBrZXlMZXR0ZXJQb3NpdGlvbiA9IHRoaXMuZ2V0TGV0dGVyUG9zaXRpb24odGhpcy5nZXRBbHBoYWJldCgpLCBuZXdLZXlbaV0pO1xuICAgICAgLy8gQ2lmcmFyIHVuYSBjYWRlbmFcbiAgICAgIGlmIChzZWxlY3RPcHRpb24gPT09IHRydWUpIHtcbiAgICAgICAgY3lwaGVyRnVuY3Rpb24gPSAobWVzc2FnZUxldHRlclBvc2l0aW9uICsga2V5TGV0dGVyUG9zaXRpb24pICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbikgJSAodGhpcy5nZXRBbHBoYWJldCgpLmxlbmd0aCkgPj0gMCkge1xuICAgICAgICAgIGN5cGhlckZ1bmN0aW9uID0gKG1lc3NhZ2VMZXR0ZXJQb3NpdGlvbiAtIGtleUxldHRlclBvc2l0aW9uKSAlICh0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjeXBoZXJGdW5jdGlvbiA9IChtZXNzYWdlTGV0dGVyUG9zaXRpb24gLSBrZXlMZXR0ZXJQb3NpdGlvbiArIHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpICUgKHRoaXMuZ2V0QWxwaGFiZXQoKS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjeXBoZXJMZXR0ZXJQb3NpdGlvbi5wdXNoKGN5cGhlckZ1bmN0aW9uKTtcbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IG5ld0tleS5sZW5ndGgpIHtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCB0aGlzLmdldEFscGhhYmV0KCkubGVuZ3RoKSB7XG4gICAgICAgIGlmIChqID09PSBjeXBoZXJMZXR0ZXJQb3NpdGlvbltpXSkge1xuICAgICAgICAgIGN5cGhlclRleHQgKz0gdGhpcy5nZXRBbHBoYWJldCgpW2pdO1xuICAgICAgICB9XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4gY3lwaGVyVGV4dDtcbiAgfVxufVxuXG5jb25zdCBwcnVlYmEgPSBuZXcgVW5icmVha2FibGVFbmNyeXB0aW9uKCdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsICdIb2xhJywgJ2NsYXZlJyk7XG5cbmNvbnNvbGUubG9nKHBydWViYS51bWJyZWFrYWJsZUN5cGhlcmFuZERlY3lwaGVyKHRydWUpKTtcbiJdfQ==